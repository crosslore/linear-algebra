% % % % % % % % % % % % %
% % % % % % % %
% %
% % Style for Linear Algebra textbook
% %
% % % % % % % %
% % % % % % % % % % % % %




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% COLOURS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %

% Title page colours
\definecolor{titletextcolour}{HTML}{044155}
\definecolor{subtitletextcolour}{HTML}{FFFFFF}
\definecolor{cctextcolour}{HTML}{FFFFFF}

% Chapter, Section & Subsection titles
\definecolor{chaptertitlecolour}{HTML}{840125}
\definecolor{sectiontitlecolour}{HTML}{0C164B}
\definecolor{subsectiontitlecolour}{HTML}{003835}
\definecolor{subsubsectiontitlecolour}{HTML}{F5AE2A}

% Example, Definition, Formula & Theorem box colours
\definecolor{theoremcolour}{HTML}{840125}
\definecolor{definitioncolour}{HTML}{0C164B}
\definecolor{examplecolour}{HTML}{003835}
\definecolor{solutioncolour}{HTML}{003835}
\definecolor{outcomecolour}{HTML}{E0B659}

% %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% . . . End of Colours . . . 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Boxes and environments for Definitions, Examples, Theorems & Outcomes
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% A command to disable indentation of the next paragraph.
% Unlike \noindent, this even works before a \par. All of the
% \aftergroups are because this command will be called from inside two
% nested environments.
\makeatletter
\newcommand{\noindentafter}{\aftergroup\@afterindentfalse\aftergroup\@afterheading}
\newcommand{\noindentafterbox}{\aftergroup\noindentafter}
\makeatother

% Style and setup of Definition, Theorem, and Example environments
\newcounter{mytheorem}[chapter]
\def\themytheorem{\thechapter.\arabic{mytheorem}}
\tcbset{
	defstyle/.style={fonttitle=\bfseries\upshape, fontupper=\slshape,
		colback=definitioncolour!5,colframe=definitioncolour,before={\par\bigskip\pagebreak[0]\parindent=0pt},after={\par\bigskip\noindentafterbox},top=1mm,bottom=1mm},
	theostyle/.style={fonttitle=\bfseries\upshape, fontupper=\slshape,
		colback=chaptertitlecolour!5,colframe=chaptertitlecolour,before={\par\bigskip\pagebreak[0]\parindent=0pt},after={\par\bigskip\noindentafterbox},top=1mm,bottom=1mm},
	examstyle/.style={fonttitle=\bfseries\upshape, fontupper=\slshape,
		colback=examplecolour!5,colframe=examplecolour,before={\par\bigskip\pagebreak[0]\parindent=0pt},after={\par\bigskip\noindentafterbox},top=1mm,bottom=1mm},
	solutionstyle/.style={fonttitle=\bfseries\upshape, fontupper=\slshape,
		colback=solutioncolour!5,colframe=solutioncolour,before={\par\bigskip\pagebreak[0]\parindent=0pt},after={\par\bigskip\noindentafterbox},top=1mm,bottom=1mm},
}
\tcbmaketheorem{definition}{Definition}{defstyle}{mytheorem}{def}
\tcbmaketheorem{theorem}{Theorem}{theostyle}{mytheorem}{thm}
\tcbmaketheorem{corollary}{Corollary}{theostyle}{mytheorem}{cor}
\tcbmaketheorem{example}{Example}{examstyle}{mytheorem}{exa}
\tcbmaketheorem{problem}{Problem}{examstyle}{mytheorem}{prob}

% following to fixexerci
\tcbmaketheorem{proposition}{Proposition}{theostyle}{mytheorem}{prop}
\tcbmaketheorem{procedure}{Procedure}{defstyle}{mytheorem}{proc}
\tcbmaketheorem{exercise}{Exercise}{solutionstyle}{mytheorem}{exe}
\tcbmaketheorem{lemma}{Lemma}{theostyle}{mytheorem}{lem}
\tcbmaketheorem{observation}{Observation}{examstyle}{mytheorem}{obs}
\tcbmaketheorem{discussion}{Discussion}{examstyle}{mytheorem}{disc}
\tcbmaketheorem{algorithm}{Algorithm}{defstyle}{mytheorem}{algo}
\tcbmaketheorem{notation}{Notation}{defstyle}{mytheorem}{not}
\tcbmaketheorem{solution}{Solution}{solutionstyle}{mytheorem}{sol}

% Outcomes
\newtcolorbox{outcome}{fonttitle=\bfseries\upshape,fontupper=\slshape,
	colback=white,colframe=outcomecolour,before={\par\bigskip\pagebreak[0]\parindent=0pt},after={\par\bigskip\noindentafterbox},before upper=\begin{enumiABCstyle},after upper=\end{enumiABCstyle},top=1mm,bottom=1mm,title=Outcomes}


% This bit of code allows the spadesuit â™  in the Solution & Proof environment to be on the bottom right of the page
\newcommand\xqed[1]{%
	\leavevmode\unskip\penalty9999 \hbox{}\nobreak\hfill
	\quad\hbox{#1}}

% Solution environment for Examples
\def\solution{\par\noindent{\solutionfont{\bf{\underline{Solution.}}}} \ignorespaces}
\def\endsolution{\solutionfont{\bf\xqed{$\spadesuit$}}\par\medskip\noindentafter}

% Proof environment for Theorems
\def\proof{\par\noindent{\prooffont{\bf{\underline{Proof.}}}} \ignorespaces}
\def\endproof{\prooffont{\bf\xqed{$\spadesuit$}}\par\medskip\noindentafter}

% Variant for proof "of" something:
\def\proofof#1{\par\noindent{\prooffont{\bf{\underline{Proof #1.}}}} \ignorespaces}
\let\endproofof\endproof

%\newenvironment{proofof}[1]{\proofof{#1}}{\endproof}

%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Special commands and shorthand commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Shorthand commands for colours used in proof and theorem environments
\def\prooffont#1{{{\bf{\textcolor{theoremcolour}{#1}}}}}
\def\solutionfont#1{{{\bf{\textcolor{solutioncolour}{#1}}}}}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom and shorthand Math commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% MATH shortcuts that can be tweaked
\newcommand{\opft}{\mathgroup\symoperators}
\newcommand{\sspan}{\mathop{\opft span}\nolimits}
\newcommand{\col}{\mathop{\opft col}\nolimits}
\newcommand{\row}{\mathop{\opft row}\nolimits}
\newcommand{\nullspace}{\mathop{\opft null}\nolimits}
\newcommand{\rank}{\mathop{\opft rank}\nolimits}
\newcommand{\nullity}{\mathop{\opft nullity}\nolimits}
\newcommand{\proj}{\mathop{\opft proj}\nolimits}
\newcommand{\comp}{\mathop{\opft comp}\nolimits}
\newcommand{\cof}{\mathop{\opft cof}\nolimits}
\newcommand{\adj}{\mathop{\opft adj}\nolimits}
\newcommand{\tr}{\mathop{\opft tr}\nolimits}
\newcommand{\shift}{\mathop{\opft shift}\nolimits}
\newcommand{\unshift}{\mathop{\opft unshift}\nolimits}

\providecommand{\text}[1]{\mbox{\rm #1}}

% Matrix setup
\setcounter{MaxMatrixCols}{10}

% Row reduced echelon form options. Note: these must be used with
% braces like {\rref} to get the correct spacing before and after.
\newcommand{\RREF}{Reduced Echelon Form}
\newcommand{\Rref}{Reduced echelon form}
\newcommand{\rref}{reduced echelon form}

% Row-Echelon Form Options. Note: these must be used with braces like
% {\ef} to get the correct spacing before and after.
\newcommand{\EF}{Echelon Form}
\newcommand{\Ef}{Echelon form}
\newcommand{\ef}{echelon form}

% Vector Notation Options
\newcommand{\vect}[1]{\mathchoice{\mbox{\bf #1}}{\mbox{\bf #1}}{\mbox{\scriptsize\bf #1}}{\mbox{\tiny\bf #1}}}
\newcommand{\longvect}{\overrightarrow}

% Using x or lambda as variable
\newcommand{\eigenvar}{\lambda}
\newcommand{\eigenvarA}{\lambda}  % first eigenvariable of two
\newcommand{\eigenvarB}{\mu}      % second eigenvariable of two

% Dot product notation options
\newcommand{\dotprod}{\mathbin{\makebox[0.7ex][c]{\raisebox{-0.6ex}{\scalebox{2}{$\cdot$}}}}}
\newcommand{\iprod}[1]{\langle#1\rangle}
\newcommand{\bigiprod}[1]{\left\langle#1\right\rangle}

% Box product
\newcommand{\boxprod}[1]{\left[#1\right]}

% Vector norm notation
\newcommand{\norm}[1]{\left\|#1\right\|}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Other useful macros

% For commenting out text.
\long\def\void#1{}

% For marking an entry in a matrix
\newcommand*\circled[1]{\!\!\!\tikz[baseline=(char.base)]{
            \node[shape=circle,inner sep=1pt,draw=red!70,fill=red!20] (char) {$#1$};}\!\!\!}

% For putting something in the index after expanding tokens. Note that,
% for example, \index{\ef} does not work correctly, as it will be
% alphabetized under backslash, rather than "echelon". Use
% \eindex{\ef} instead.
\newcommand{\eindex}[1]{{\edef\tmpa{#1}\def\tmpb##1\relax{\index{##1}}\expandafter\tmpb\tmpa\relax}}

% SI units are always typeset in a Roman font, even if the surrounding
% text is in italics. We use \mathop so that there will be a tiny
% space between each unit; this makes things like kgms easier to read.
\newcommand{\SI}[1]{\mathop{\textrm{\rm #1}}\nolimits}
\newcommand{\m}{\SI{m}}
\newcommand{\kg}{\SI{kg}}
\newcommand{\s}{\SI{s}}
\newcommand{\volt}{\SI{V}}
\newcommand{\amp}{\SI{A}}
\newcommand{\ohm}{\SI{$\Omega$}}
\newcommand{\degC}{\mathop{{\,}^{\circ}\textrm{\rm C}}\nolimits}
\newcommand{\Reynolds}{\SI{Re}}

% Shorthand command for some standard sets
\newcommand{\N}{\mathbb{N}}  % natural numbers
\newcommand{\Z}{\mathbb{Z}}  % integers
\newcommand{\Q}{\mathbb{Q}}  % rationals
\newcommand{\R}{\mathbb{R}}  % reals
\newcommand{\C}{\mathbb{C}}  % complex numbers

% Other shorthand notations for sets
\newcommand{\Poly}{\mathbf{P}}    % vector space of polynomials
\newcommand{\Mat}{\mathbf{M}}     % vector space of matrices
\newcommand{\Func}{\mathbf{Func}} % vector space of functions
\newcommand{\Seq}{\mathbf{Seq}}   % vector space of functions
\newcommand{\Lin}{\mathbf{Lin}}   % vector space of linear transformations
\newcommand{\Hilb}{\mathbf{Hilb}} % Hilbert space

% Matrices with square brackets.
\newenvironment{mymatrix}[1]{\left[\begin{array}{#1}}{\end{array}\right]}
\newenvironment{mysmallmatrix}[1]{\begingroup\renewcommand{\arraystretch}{0.5}\arraycolsep=0.5ex\begin{mymatrix}{#1}}{\end{mymatrix}\endgroup}
\newcommand{\mat}[1]{\left[#1\right]}

% Matrices with vertical bars. Also used for absolute value and cardinality.
\newenvironment{absmatrix}[1]{\left|\begin{array}{#1}}{\end{array}\right|}
\newcommand{\abs}[1]{\left|#1\right|}

% For writing a set, use $\set{...}$ or $\set{...\mid...}$.
\newcommand{\set}[1]{\left\{#1\right\}}

% For writing a tuple, use $\paren{...}$ instead of $\left(...\right)$.
\newcommand{\paren}[1]{\left(#1\right)}

% To use as a subscript for a collinear vector
\newcommand{\coll}{\|}

% Use \nospellcheck{\wordd} to exclude a word from being
% spell-checked. This is used for deliberate typos that should not be
% corrected by the spell checker, nor added to the spell checker's
% dictionary.

% Example: Don't spell ``homogeneous'' as ``\nospellcheck{\homogenous}''.

% From https://tex.stackexchange.com/questions/42318/removing-a-backslash-from-a-character-sequence
\makeatletter
\newcommand{\nospellcheck}[1]{%
  \ifcat\relax\noexpand#1%
    \expandafter\expandafter\expandafter\@gobble\expandafter\string
  \fi
  #1%
}
\makeatother

% Superscript "th", as in $i\th$ and $j\th$.
\renewcommand{\th}{^{\,\rm th}}
\newcommand{\st}{^{\,\rm st}}
\newcommand{\nd}{^{\,\rm nd}}
\newcommand{\rd}{^{\,\rm rd}}

% Special case: $\ijth$ instead of $ij\th$, for better spacing.
\newcommand{\ijth}{i\!j\th}

% For row operations
\newcommand{\rowop}{~\leftarrow~}
\newcommand{\rowswap}{~\leftrightarrow~}

% For coordinates of vector w.r.t. basis
\newcommand{\coord}[1]{\left[#1\right]}

% For antiderivatives
\newcommand{\bigbracket}[1]{\left[#1\right]}

% Minors and cofactors. Write $\minor{A}{ij}$ and $\cofactor{A}{ij}$.
\newcommand{\minor}[2]{M_{#2}}
\newcommand{\cofactor}[2]{C_{#2}}

% For striking out rows and columns of a matrix.
\newcommand{\strikeh}[2]{\makebox[0in][l]{\hspace{-0.2em}\raisebox{.6ex}[0pt]{\color{blue}\rule{#1}{0.5mm}}}\makebox[0in]{$#2$}}
\newcommand{\strikev}[2]{\makebox[0in]{\raisebox{1.6ex}{\raisebox{-#1}[0pt][0pt]{\color{blue}\rule{0.5mm}{#1}}}}\makebox[0in]{$#2$}}

% Row equivalence of matrices
\newcommand{\roweq}{\simeq}

% Similarity of matrices
\newcommand{\similar}{\sim}

% Isomorphism
\newcommand{\iso}{\cong}

% Hamming weight and distance
\newcommand{\Hw}{W}
\newcommand{\Hd}{D}

% \iff in text mode
\newcommand{\textiff}{$\Leftrightarrow$}

% Symbol to use for the adjoint of a matrix
\newcommand{\adjoint}{*}

% Complex conjugate
\newcommand{\conjugate}[1]{\overline{#1}}

% Centroid
\newcommand{\centroid}[1]{\overline{#1}}

% Dirac notation
\newcommand{\ket}[1]{|#1\rangle}
\newcommand{\bra}[1]{\langle#1|}
\newcommand{\braket}[2]{\langle#1|#2\rangle}

% Orthogonality
\newcommand{\orth}{\perp}
